{% extends 'base.html' %}

{% block head_extra %}
    {{ super() }}
    <link rel="preconnect" href="https://assets.calendly.com" crossorigin>
    <link rel="dns-prefetch" href="https://assets.calendly.com">
    <link rel="stylesheet" href="https://assets.calendly.com/assets/external/widget.css">
{% endblock %}

{% block title %}Book a Call | {{ config.name }}{% endblock %}
{% block meta_description %}Get in touch to book a 30-minute strategy call or request workshops for your school or studio.{% endblock %}

{% block content %}
<section class="page-hero">
    <p class="section-eyebrow">Contact</p>
    <h1>Book a free 30-minute strategy call.</h1>
    <p class="lead">Share your goals and current work. Weâ€™ll map a mentoring sprint, workshop plan, or collaboration outline.</p>
</section>

<section class="section contact-section">
    <div class="contact-grid">
        <div class="contact-card">
            <h2>How to reach out</h2>
            <ul class="contact-list">
                <li><strong>Email:</strong> <a href="mailto:{{ config.email }}">{{ config.email }}</a></li>
                <li><strong>Calendly:</strong> <a href="{{ config.calendly_link }}" target="_blank" rel="noopener">Book a slot</a></li>
                <li><strong>Location:</strong> Remote from Estonia & Finland time zones</li>
            </ul>
            <p>Expect a reply within 24 hours with a quick questionnaire so we can focus the call.</p>
        </div>
        <div class="contact-card">
            <h2>Booking widget</h2>
            <div class="booking-placeholder">
                <p>Use the floating Calendly badge in the corner to pick a time, or <a href="{{ config.calendly_link }}"
                        target="_blank" rel="noopener">open the booking page in a new tab</a>.</p>
            </div>
        </div>
    </div>
</section>

<section class="section final-cta">
    <div class="final-cta-card">
        <p class="section-eyebrow">Need workshops instead?</p>
        <h2>Schools and studios can request tailored sessions.</h2>
        <a href="{{ site_links.schools }}" class="cta-button secondary">See Workshops</a>
    </div>
</section>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
    <script>
        (function () {
            const calendlyUrl = {{ config.calendly_link | tojson }};

            const initBadge = () => {
                if (!window.Calendly || typeof window.Calendly.initBadgeWidget !== 'function') {
                    return;
                }

                window.Calendly.initBadgeWidget({
                    url: calendlyUrl,
                    text: 'Schedule time with me',
                    color: '#0069ff',
                    textColor: '#ffffff',
                    branding: true,
                });
            };

            window.addEventListener('load', function onLoad() {
                initBadge();
                if (!window.Calendly || typeof window.Calendly.initBadgeWidget !== 'function') {
                    const script = document.querySelector('script[src*=\"calendly.com/assets/external/widget.js\"]');
                    if (script) {
                        script.addEventListener('load', initBadge, { once: true });
                    }
                }
            }, { once: true });
        }());
    </script>
{% endblock %}
